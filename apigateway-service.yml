 # Server Configuration
  server:
    port: 8000

  # Spring Application Configuration
  spring:
    application:
      name: apigateway-service

    # Cloud Configuration (통합)
    cloud:
      bus:
        enabled: true
      gateway:
        routes:
          # Route 0: User Service - Public API
          - id: user-service-public
            uri: lb://USER-SERVICE
            predicates:
              - Path=/user-service/users,/user-service/auth/**,/user-service/redis-test/**
            filters:
              - RemoveRequestHeader=Cookie
              - RewritePath=/user-service/(?<segment>.*), /$\{segment}

          # Route 1: User Service - Protected API
          - id: user-service-protected
            uri: lb://USER-SERVICE
            predicates:
              - Path=/user-service/**
            filters:
              - RemoveRequestHeader=Cookie
              - RewritePath=/user-service/(?<segment>.*), /$\{segment}
              - JwtAuthentication

          # Route 2: Catalog Service - Public (조회만 허용)
          - id: catalog-service-public
            uri: lb://CATALOG-SERVICE
            predicates:
              - Path=/catalog-service/catalogs
              - Method=GET
            filters:
              - RemoveRequestHeader=Cookie
              - RewritePath=/catalog-service/(?<segment>.*), /$\{segment}

          # Route 3: Catalog Service - Protected (생성/수정/삭제는 인증 필요)
          - id: catalog-service-protected
            uri: lb://CATALOG-SERVICE
            predicates:
              - Path=/catalog-service/**
            filters:
              - RemoveRequestHeader=Cookie
              - RewritePath=/catalog-service/(?<segment>.*), /$\{segment}
              - JwtAuthentication

          # Route 4: Order Service - Protected (생성/수정/삭제/조회 인증 필요)
          - id: order-service
            uri: lb://ORDER-SERVICE
            predicates:
              - Path=/order-service/**
            filters:
              - RemoveRequestHeader=Cookie
              - RewritePath=/order-service/(?<segment>.*), /$\{segment}
              - JwtAuthentication

    # RabbitMQ Configuration
    rabbitmq:
      host: 127.0.0.1
      port: 5672
      username: greenbasket
      password: greenbasket
      listener:
        simple:
          auto-startup: true

    cloud:
      bus:
        enabled: true 

  # JWT Token Configuration
  token:
    access-expiration-time: 1800000
    refresh-expiration-time: 604800000
    secret: '{cipher}AQCnhb9TNv6VTu87jfcvsgf3j/zqfNq+lykL/qqjeXXcDbQhxr6SXZh8gUvyRp1Tx9GTvupgavtPLI8OFiCm7bpNNaZPytSGDWY38tQyl8VcYdItmKfzBozPmfRsEARQ1jDCIFFiiVTrKDu5Q5PANGq6quaLl2WQikLj74ikU/czskImrR9m4ZKSZc2Ag0MfanHwB96NIpnqDRhCD5EEJyXycDHfhFTX9V3vei0VLHM3YLmMt5/T7FwyNnskn71F10ut1Y+DiJgmxQlW4FH5AxsOICgq5kN/HPF2ktmZKWWoNKiZQT2RDaqAZU7yYkSP/hwboxPbXY+RO/tNJ/NtYCVVCXlaPTKi5lcB2B9gyMLHnpjOXykp0LyvnUmDUPfOUiczIKtXTUk6ihJvLWyZfs+dYiwKbils1P3fKMZblRMcLt3B35IVk3Hr1IbEgB3Oo8U='


  

  # Eureka Client Configuration
  eureka:
    instance:
      instance-id: ${spring.application.name}:${server.port}
      hostname: localhost
      prefer-ip-address: false
    client:
      service-url:
        defaultZone: http://localhost:8761/eureka
      fetch-registry: true
      register-with-eureka: true

  # Management Endpoints
  management:
    endpoints:
      web:
        exposure:
          include: refresh,health,beans,info,httpexchanges
    health:
      rabbit:
        enabled: false
